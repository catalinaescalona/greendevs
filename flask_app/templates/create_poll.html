<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/create_poll.css') }}">
    <!--link to jquery library-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>

<body>
    <header>
        <img id="logo" src="static/images/pollaris-logo.png" alt="Pollaris Logo" />
        <button id="login-btn" class="btn">Account</button>
    </header>
    <div id='questions' class="section">
        <form id="create-poll-form" method="POST" action="/create">
            <!-- Add form element here -->
            <input type="text" id="question" name="question" placeholder='New Question' />
            <input type="button" id="tutorial" class="btn" value="Add Option" onclick="addOption()" />
            <hr />
        </form>
        <script>
            function addOption() {
                // ... (your existing code for adding options)
            }

            var dict = {};

            function send_poll() {
                // ... (your existing code for sending poll data)

                $.ajax({
                    url: '/create_test',
                    type: "POST",
                    data: JSON.stringify(dict),
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    success: function (response) {
                        // Display the success message returned from the server
                        alert(response.message);
                        // You can also update the message on the web page if needed
                        $("#success-message").text(response.message);
                    },
                    error: function () {
                        console.log("Error sending data.");
                        // Add error handling logic here
                    }
                });

                // ... (your existing code to clear the form and reset dict)
            }
        </script>
    </div>
    <div class="section">
        <br>
        <input type="button" id="submit_poll" class="btn" value="Submit Poll" onclick="send_poll()">
        <br>
        <br>

        <!-- Add this div to display the success message -->
        <div id="success-message"></div>
        
        <br>
        <script>
            // ... (your existing code for handling logo and login button clicks)
        </script>
    </div>
</body>

</html>
